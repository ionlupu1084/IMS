@page "/purchase"
@using static IMS.WebApp.Components.Controls.Common.AutoCompleteComponent
@inject IViewInventoriesByNameUseCase ViewInventoryByNameUseCase
@rendermode InteractiveServer
<h3>Purchase Inventory</h3>
<br />
<AutoCompleteComponent
    Label="Inventory"
    SearchFunction="SearchInventory"
    OnItemSelected="HandleItemSelected"></AutoCompleteComponent>
<br />
@selectedItem?.Name;
@code {
    private ItemViewModel? selectedItem;
    private List<ItemViewModel> SearchInventory(string name)
    {
        var list=ViewInventoryByNameUseCase.ExecuteAsync(name).GetAwaiter().GetResult();
        if (list==null)
        {
            return null;
        }
        return list.Select(x => new ItemViewModel { Id = x.InventoryID, Name = x.InventoryName })?.ToList();
        
       
    }
    private void HandleItemSelected(ItemViewModel item)
    {
        selectedItem = item;
    }

}
